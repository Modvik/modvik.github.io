(()=>{"use strict";const e=new class{constructor(e){this.type=e}init(){this.оbjects=[],this.daClassname="_dynamic_adapt_",this.nodes=[...document.querySelectorAll("[data-da]")],this.nodes.forEach((e=>{const t=e.dataset.da.trim().split(","),r={};r.element=e,r.parent=e.parentNode,r.destination=document.querySelector(`${t[0].trim()}`),r.breakpoint=t[1]?t[1].trim():"767",r.place=t[2]?t[2].trim():"last",r.index=this.indexInParent(r.parent,r.element),this.оbjects.push(r)})),this.arraySort(this.оbjects),this.mediaQueries=this.оbjects.map((({breakpoint:e})=>`(${this.type}-width: ${e}px),${e}`)).filter(((e,t,r)=>r.indexOf(e)===t)),this.mediaQueries.forEach((e=>{const t=e.split(","),r=window.matchMedia(t[0]),a=t[1],n=this.оbjects.filter((({breakpoint:e})=>e===a));r.addEventListener("change",(()=>{this.mediaHandler(r,n)})),this.mediaHandler(r,n)}))}mediaHandler(e,t){e.matches?t.forEach((e=>{e.index=this.indexInParent(e.parent,e.element),this.moveTo(e.place,e.element,e.destination)})):t.forEach((({parent:e,element:t,index:r})=>{t.classList.contains(this.daClassname)&&this.moveBack(e,t,r)}))}moveTo(e,t,r){t.classList.add(this.daClassname),"last"===e||e>=r.children.length?r.append(t):"first"!==e?r.children[e].before(t):r.prepend(t)}moveBack(e,t,r){t.classList.remove(this.daClassname),void 0!==e.children[r]?e.children[r].before(t):e.append(t)}indexInParent(e,t){return[...e.children].indexOf(t)}arraySort(e){"min"===this.type?e.sort(((e,t)=>e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?-1:"last"===e.place||"first"===t.place?1:e.place-t.place:e.breakpoint-t.breakpoint)):e.sort(((e,t)=>e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?1:"last"===e.place||"first"===t.place?-1:t.place-e.place:t.breakpoint-e.breakpoint))}}("min");window.addEventListener("DOMContentLoaded",(function(){[].forEach.call(document.querySelectorAll(".tel"),(function(e){var t;function r(e){e.keyCode&&(t=e.keyCode),this.selectionStart<3&&e.preventDefault();var r="+7 (___) ___-__-__",a=0,n=r.replace(/\D/g,""),o=this.value.replace(/\D/g,""),i=r.replace(/[_\d]/g,(function(e){return a<o.length?o.charAt(a++)||n.charAt(a):e}));-1!=(a=i.indexOf("_"))&&(a<5&&(a=3),i=i.slice(0,a));var s=r.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");(!(s=new RegExp("^"+s+"$")).test(this.value)||this.value.length<5||t>47&&t<58)&&(this.value=i),"blur"==e.type&&this.value.length<5&&(this.value="")}e.addEventListener("input",r,!1),e.addEventListener("focus",r,!1),e.addEventListener("blur",r,!1),e.addEventListener("keydown",r,!1)}))})),document.addEventListener("DOMContentLoaded",(function(){!function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),function(){let e=document.querySelectorAll(".tabs");for(let t=0;t<e.length;t++){let r=e[t],a=r.querySelectorAll(".tabs__item"),n=r.querySelectorAll(".tabs__block");for(let e=0;e<a.length;e++){let t=a[e];t.addEventListener("click",(function(r){for(let e=0;e<a.length;e++)a[e].classList.remove("active"),n[e].classList.remove("active");t.classList.add("active"),n[e].classList.add("active"),r.preventDefault()}))}}}(),e.init();let t=document.querySelector(".menu__body");if(document.querySelectorAll(".menu__icon").forEach((e=>{e.addEventListener("click",(e=>{t.classList.toggle("active")}))})),document.querySelector(".amount")&&document.querySelectorAll(".amount").forEach((e=>{let t=e.querySelector(".amount__btn-add"),r=e.querySelector(".amount__btn-down"),a=e.querySelector(".amount__value");t.addEventListener("click",(e=>{a.innerHTML++})),r.addEventListener("click",(e=>{+a.innerHTML>0&&a.innerHTML--}))})),document.querySelector(".change")&&document.querySelectorAll(".change").forEach((e=>{e.addEventListener("click",(e=>{}))})),document.querySelector(".shop__block")){let e=document.querySelectorAll(".shop__block");e.forEach((t=>{t.addEventListener("click",(r=>{e.forEach((e=>{e.classList.remove("active")})),t.classList.add("active")}))}))}if(document.querySelector(".popup__payment")){let e=document.querySelectorAll(".popup__payment");e.forEach((t=>{t.addEventListener("click",(r=>{e.forEach((e=>{e.classList.remove("active")})),t.classList.add("active")}))}))}if(document.querySelector(".popup.popup-cart")){let e=document.querySelector(".popup"),t=document.querySelector(".extradition__value_first"),r=document.querySelector(".total__text"),a=document.querySelector(".cart"),n=document.querySelectorAll(".change-popup-ext");document.querySelector(".change-popup-pay").addEventListener("click",(t=>{e.classList.add("active"),e.classList.add("pay")})),n.forEach((t=>{t.addEventListener("click",(()=>{e.classList.add("active"),e.classList.add("ext")}))})),e.addEventListener("click",(n=>{if((n.target.classList.contains("popup__close")||n.target.classList.contains("popup__substrate"))&&(e.classList.remove("active"),e.classList.remove("ext"),e.classList.remove("pay")),n.target.classList.contains("btn-ext")&&("Самовывоз"==document.querySelector(".tabs__item.active").innerHTML&&(t.innerHTML=document.querySelector(".shop__block.active").innerHTML,r.innerHTML=document.querySelector(".shop__block.active").innerHTML,a.classList.remove("pay"),a.classList.add("ext"),e.classList.remove("active"),e.classList.remove("ext")),"Курьером"==document.querySelector(".tabs__item.active").innerHTML&&(a.classList.remove("ext"),a.classList.add("pay"),e.classList.remove("active"),e.classList.remove("ext"))),n.target.classList.contains("btn-pay")){let t=document.querySelector(".popup__payment.active").innerHTML;document.querySelector(".payment__text").innerHTML=t,document.querySelector(".total-js").innerHTML=t,e.classList.remove("active"),e.classList.remove("pay")}}))}const r=async e=>{const t=await fetch("mail.php",{method:"POST",body:e});if(!t.ok)throw new Error(`Ошибка по адресу ${url}, статус ошибки ${t.status}`);return await t.text()};if(document.querySelector(".form")){const e=document.querySelector("form"),t=document.querySelector(".total__btn"),a=document.querySelectorAll(".form__error"),n=document.querySelector("#personal-data"),o=document.querySelector(".payment__text"),i=document.querySelector(".extradition__value_first");document.querySelectorAll(".js-err").forEach((e=>{e.addEventListener("click",(()=>{e.querySelector(".form__error").classList.remove("form__error_opacity"),e.querySelector(".form__error").classList.add("form__error_opacity")}))})),t.addEventListener("click",(function(t){if(t.preventDefault(),document.querySelector(".cart.pay")){let t=!0;const i=new FormData(e);i.append("personal-data",n.checked),i.append("payment-text",o.innerHTML);for(const[e,r]of i)""!=r&&"false"!=r||a.forEach((t=>{t.dataset.name==e&&t.classList.remove("form__error_opacity")})),a.forEach((e=>{e.classList.contains("form__error_opacity")||(t=!1)}));t&&r(i).then((e=>{console.log(e),form.reset()})).catch((e=>console.error(e)))}if(document.querySelector(".cart.ext")){let t=!0;const a=new FormData(e);a.append("extradition-value",i.innerHTML),t&&r(a).then((e=>{console.log(e)})).catch((e=>console.error(e)))}}))}new Swiper(".head-slider",{grabCursor:!0,allowTouchMove:!0,watchOverflow:!0,pagination:{el:".head-slider__pagination",clickable:!0},navigation:{nextEl:".button-next",prevEl:".button-prev"},on:{lazyImageReady:function(){ibg()}}}),new Swiper(".products-month__swiper",{grabCursor:!0,allowTouchMove:!0,slidesPerView:2,slidesPerGroup:2,spaceBetween:5,watchOverflow:!0,freeMode:!0,breakpoints:{1350:{slidesPerView:6,slidesPerGroup:6},992:{slidesPerView:5,slidesPerGroup:5},768:{slidesPerView:4,slidesPerGroup:4},480:{slidesPerView:3,slidesPerGroup:3}},pagination:{el:".products-month__pagination",clickable:!0},navigation:{nextEl:".products-month__button-next",prevEl:".products-month__button-prev"},on:{lazyImageReady:function(){ibg()}}}),new Swiper(".sale__swiper",{grabCursor:!0,allowTouchMove:!0,slidesPerView:2,slidesPerGroup:2,spaceBetween:8,watchOverflow:!0,freeMode:!0,breakpoints:{1350:{slidesPerView:6,slidesPerGroup:6},992:{slidesPerView:5,slidesPerGroup:5},768:{slidesPerView:4,slidesPerGroup:4},480:{slidesPerView:3,slidesPerGroup:3}},pagination:{el:".sale__pagination",clickable:!0},navigation:{nextEl:".sale__button-next",prevEl:".sale__button-prev"},on:{lazyImageReady:function(){ibg()}}}),new Swiper(".advantages-slider",{grabCursor:!0,allowTouchMove:!0,watchOverflow:!0,freeMode:!0,breakpoints:{992:{slidesPerView:3},768:{slidesPerView:2},480:{slidesPerView:1}},pagination:{el:".advantages__pagination",clickable:!0},navigation:{nextEl:".advantages__button-next",prevEl:".advantages__button-prev"},on:{lazyImageReady:function(){ibg()}}}),new Swiper(".product-slider",{loop:!0,grabCursor:!0,allowTouchMove:!0,dynamicBullets:!0,dynamicMainBullets:1,on:{lazyImageReady:function(){ibg()}},thumbs:{swiper:{el:".product-prew",slidesPerView:4,direction:"vertical",spaceBetween:20}}})}))})();